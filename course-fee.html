<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Course Fee & Payment - Language Study Abroad</title>
<link rel="stylesheet" href="style.css">

<style>
/* ===== POPUP & LOADER ===== */
.popup-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.75);
    z-index: 1000;
}

/* Loader */
.loader {
    border: 5px solid rgba(255,255,255,0.2);
    border-top: 5px solid #00c6ff;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
    margin: auto;
    position: absolute;
    inset: 0;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Popup */
.popup-box {
    display: none;
    background: #111827;
    color: #fff;
    max-width: 420px;
    padding: 25px;
    border-radius: 16px;
    text-align: center;
    position: absolute;
    inset: 50%;
    transform: translate(-50%, -50%);
    box-shadow: 0 20px 40px rgba(0,0,0,0.6);
}

.popup-box h3 {
    color: #00c6ff;
    margin-bottom: 10px;
}

.popup-box button {
    margin-top: 15px;
    padding: 10px 26px;
    border: none;
    border-radius: 25px;
    background: linear-gradient(135deg, #00c6ff, #0072ff);
    color: #fff;
    font-weight: bold;
    cursor: pointer;
}
</style>
</head>

<body>

<header>
    <h1>Language Study Abroad</h1>
    <nav>
        <ul class="nav-menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="course-fee.html">Course Fee & Payment</a></li>
        </ul>
    </nav>
</header>

<section class="course-fee-section">
    <h2>Course Fees</h2>

    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>Course</th>
                    <th>Duration</th>
                    <th>Fee (USD)</th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td>English Beginner</td>
                    <td>3 Months</td>
                    <td>$150</td>
                </tr>
                <tr>
                    <td>Spanish Intermediate</td>
                    <td>3 Months</td>
                    <td>$200</td>
                </tr>
                <tr>
                    <td>French Advanced</td>
                    <td>3 Months</td>
                    <td>$250</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>


<section>
    <h2>Payment</h2>

    <form id="paymentForm">

        <label>Full Name:</label><br>
        <input type="text" name="name" required><br><br>

        <label>Email:</label><br>
        <input type="email" name="email" required><br><br>

        <label>Select Course:</label><br>
        <select id="courseSelect" required>
            <option value="">-- Select Course --</option>
            <option value="150">English Beginner</option>
            <option value="200">Spanish Intermediate</option>
            <option value="250">French Advanced</option>
        </select><br><br>

        <label>Amount (USD):</label><br>
        <input type="text" id="amount" readonly><br><br>

        <label>Payment Method:</label><br>
        <select required>
            <option>Credit Card</option>
            <option>Debit Card</option>
            <option>PayPal</option>
        </select><br><br>

        <label>Card Number:</label><br>
        <input type="text" placeholder="1234 5678 9012 3456" required><br><br>

        <label>Expiry Date:</label><br>
        <input type="text" placeholder="MM/YY" required><br><br>

        <label>CVV:</label><br>
        <input type="text" placeholder="123" required><br><br>

        <button type="submit">Pay Now</button>
    </form>
</section>

<!-- ===== POPUP & LOADER ===== -->
<div class="popup-overlay" id="popup">
    <div class="loader" id="loader"></div>

    <div class="popup-box" id="popupBox">
        <h3>Payment Successful ðŸŽ‰</h3>
        <p>Your payment of <strong>$<span id="paidAmount"></span></strong> has been received.</p>
        <p>Our team will contact you shortly.</p>
        <button onclick="downloadReceipt()">â¬‡ Download PDF Receipt</button>
        <button onclick="closePopup()">OK</button>
    </div>
</div>

<!-- jsPDF CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
// Auto update amount based on course
const courseSelect = document.getElementById("courseSelect");
const amountInput = document.getElementById("amount");
const paidAmount = document.getElementById("paidAmount");

courseSelect.addEventListener("change", function(){
    amountInput.value = this.value ? "$" + this.value : "";
});

// Handle payment submission
document.getElementById("paymentForm").addEventListener("submit", function(e){
    e.preventDefault();

    paidAmount.textContent = courseSelect.value;
    document.getElementById("popup").style.display = "block";

    // Show loader first
    document.getElementById("loader").style.display = "block";
    document.getElementById("popupBox").style.display = "none";

    // After 2 seconds, show success popup
    setTimeout(() => {
        document.getElementById("loader").style.display = "none";
        document.getElementById("popupBox").style.display = "block";
    }, 2000);
});

// Close popup
function closePopup(){
    document.getElementById("popup").style.display = "none";
    document.getElementById("paymentForm").reset();
    amountInput.value = "";
}

// ===== PDF Receipt =====
function downloadReceipt() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const name = document.querySelector('input[name="name"]').value;
    const email = document.querySelector('input[name="email"]').value;
    const courseText = courseSelect.selectedOptions[0].text;
    const amount = paidAmount.textContent;
    const date = new Date().toLocaleString();
    const receiptNo = "LSA-" + Math.floor(100000 + Math.random() * 900000);

    doc.setFontSize(18);
    doc.text("Language Study Abroad", 20, 20);

    doc.setFontSize(12);
    doc.text("Payment Receipt", 20, 30);

    doc.line(20, 34, 190, 34);

    doc.text(`Receipt No: ${receiptNo}`, 20, 45);
    doc.text(`Date: ${date}`, 20, 55);

    doc.text(`Name: ${name}`, 20, 70);
    doc.text(`Email: ${email}`, 20, 80);
    doc.text(`Course: ${courseText}`, 20, 90);
    doc.text(`Amount Paid: $${amount}`, 20, 100);
    doc.text(`Payment Status: SUCCESS`, 20, 110);

    doc.line(20, 120, 190, 120);

    doc.text("Thank you for choosing Language Study Abroad.", 20, 135);
    doc.text("This is a system-generated receipt.", 20, 145);

    doc.save(`Payment_Receipt_${receiptNo}.pdf`);
}
</script>

<footer>
    <p>&copy; 2025 Language Study Abroad. All rights reserved.</p>
</footer>

</body>
</html>
